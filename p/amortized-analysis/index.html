<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="为什么要平摊分析？ 算法往往是会对内存中的数据进行修改的，而同一个算法的多次执行，就会通过对数据的修改而互相影响。\n为了解决计算上的困难，以及操作之间的不独立而导致的估算上界过松，我们就需要用到平摊分析。\n"><title>平摊分析 Amortized Analysis</title>
<link rel=canonical href=https://wr786.github.io/p/amortized-analysis/><link rel=stylesheet href=/scss/style.min.d8b5f0b7269688f38a729b2e92d18eb1a2ab5fce4660c508b74567fccbdf52c4.css><meta property='og:title' content="平摊分析 Amortized Analysis"><meta property='og:description' content="为什么要平摊分析？ 算法往往是会对内存中的数据进行修改的，而同一个算法的多次执行，就会通过对数据的修改而互相影响。\n为了解决计算上的困难，以及操作之间的不独立而导致的估算上界过松，我们就需要用到平摊分析。\n"><meta property='og:url' content='https://wr786.github.io/p/amortized-analysis/'><meta property='og:site_name' content='wr786'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='算法'><meta property='article:published_time' content='2021-05-07T00:00:00+08:00'><meta property='article:modified_time' content='2021-05-07T00:00:00+08:00'><meta name=twitter:title content="平摊分析 Amortized Analysis"><meta name=twitter:description content="为什么要平摊分析？ 算法往往是会对内存中的数据进行修改的，而同一个算法的多次执行，就会通过对数据的修改而互相影响。\n为了解决计算上的困难，以及操作之间的不独立而导致的估算上界过松，我们就需要用到平摊分析。\n"><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_ce0162dcc8c9e67a.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🛸</span></figure><div class=site-meta><h1 class=site-name><a href=/>wr786</a></h1><h2 class=site-description>Comment te dire adieu</h2></div></header><ol class=menu-social><li><a href=https://www.eventernote.com/users/NANAKOWA target=_blank title=Eventernote rel=me><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg></a></li><li><a href=https://github.com/wr786 target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#为什么要平摊分析>为什么要平摊分析？</a></li><li><a href=#平摊分析的三种方法>平摊分析的三种方法</a><ol><li><a href=#聚集分析-aggregate-method>聚集分析 <em>Aggregate Method</em></a><ol><li><a href=#栈s上的三种操作>栈S上的三种操作</a></li><li><a href=#二进制计数器>二进制计数器</a></li></ol></li><li><a href=#记账法-accounting-method>记账法 <em>Accounting Method</em></a><ol><li><a href=#栈s上的三种操作-1>栈S上的三种操作</a></li><li><a href=#二进制计数器-1>二进制计数器</a></li></ol></li><li><a href=#势能法-potential-method>势能法 <em>Potential Method</em></a><ol><li><a href=#栈s上的三种操作-2>栈S上的三种操作</a></li><li><a href=#二进制计数器-2>二进制计数器</a></li></ol></li></ol></li><li><a href=#补充习题>补充习题</a><ol><li><a href=#insert--remove_bottom_half>INSERT & REMOVE_BOTTOM_HALF</a></li><li><a href=#-mtfmove-to-front-链表访问><strong>[竞争分析]</strong> MTF(Move-to-Front) 链表访问</a><ol><li><a href=#mtf算法>MTF算法</a></li><li><a href=#定义势函数>定义势函数</a></li><li><a href=#计算平摊代价>计算平摊代价</a></li><li><a href=#思考如果算法a会交换其他元素怎么办>思考：如果算法A会交换其他元素怎么办？</a></li></ol></li><li><a href=#更多平摊分析经典问题>更多平摊分析经典问题：</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E5%BC%80%E5%8F%91%E6%9D%82%E8%B0%88/>开发杂谈</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/amortized-analysis/>平摊分析 Amortized Analysis</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 07, 2021</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 8 分钟</time></div></footer></div></header><section class=article-content><h2 id=为什么要平摊分析>为什么要平摊分析？</h2><p>算法往往是会对内存中的数据进行修改的，而同一个算法的多次执行，就会通过对数据的修改而互相影响。</p><p>为了解决计算上的困难，以及<strong>操作之间的不独立</strong>而导致的估算上界过松，我们就需要用到平摊分析。</p><h2 id=平摊分析的三种方法>平摊分析的三种方法</h2><p>平摊分析总共有三种方法，概括起来就是：</p><ul><li>聚集分析：n次总代价 / n</li><li>记账法：把之后要做的操作的代价提前考虑</li><li>势能法：用势能释放来支付未来操作的代价</li></ul><p>其中势能法是我们需要重点掌握的方法。</p><h3 id=聚集分析-aggregate-method>聚集分析 <em>Aggregate Method</em></h3><blockquote><p>平摊代价 = n次操作总代价 / n</p></blockquote><p>通过总运行时间求平均得到平摊时间，不需要对操作序列的概率分布做假设。</p><h4 id=栈s上的三种操作>栈S上的三种操作</h4><p>比如课堂例题，栈上的三种操作(PUSH、POP、MULTIPOP)，我们可以得到一个总时间上界$O(n^2)$，但它并不紧。</p><p>在栈上，所有POP和MULTIPOP弹出的对象数不会多余PUSH入栈的对象数。</p><p>因此，若进行n次操作，PUSH的总规模是$O(n)$，这也就使得POP和MULTIPOP的总规模也只能是$O(n)$。那么n次操作的总代价为$O(n)$，我们计算得到平摊代价=$\frac{O(n)}{n} = O(1)$</p><h4 id=二进制计数器>二进制计数器</h4><p>观察INCREMENT操作序列</p><ul><li>每次操作，$A[0]$都反转</li><li>每两次操作，$A[1]$反转</li><li>每$2^i$次操作，$A[i]$反转</li></ul>$$
\sum_{i=0}^{\lfloor log(n) \rfloor}{\lfloor \frac{n}{2^i} \rfloor} < n\sum_{i=0}^{\infin}\frac{1}{2^i} = 2n
$$<p>那么总时间为$O(n)$，每个操作平坦时间为$O(n) / n = O(1)$</p><h3 id=记账法-accounting-method>记账法 <em>Accounting Method</em></h3><p>不必算出每一步实际代价，我们用一个虚构的代价，满足对任意k，前k步满足：</p><blockquote><p>$第k步存款 = \sum_{i=1}^{k}平摊代价_i - \sum_{i=1}^k实际代价_i \geq 0$</p></blockquote><p>如何设计平摊代价？提前考虑之后的代价。</p><h4 id=栈s上的三种操作-1>栈S上的三种操作</h4><p>仍然，在栈上，所有POP和MULTIPOP弹出的对象数不会多余PUSH入栈的对象数。</p><p>那么我们如何设计平摊代价？答案是把POP类操作的帐记在PUSH头上。</p><p>每次PUSH操作，我们对入栈的对象收费2元，1元用于支付实际费用，另1元存起来，为了支付这个对象以后可能发生的POP操作。</p><p>由于栈中的对象数不可能为负，而每个对象被POP的次数不会多于它被PUSH的次数，所以存款不会小于0。</p><p>那么，我们可以对POP、MULTIPOP收费0元。因为PUSH时已经预先付过它们的费用了。</p><p>进行n次操作，PUSH总共记账$O(2n)$，POP和MULTIPOP总共记账$0$，那么总代价也就是$O(2n) = O(n)$。</p><p>平摊时间为$O(n)/n = O(1)$。</p><h4 id=二进制计数器-1>二进制计数器</h4><p>注意到，每次INCREMENT只会把一个0反转为1，但可能把多个1反转为0.</p><p>我们每次INCREMENT收费2元，其中1元用来支付将一个0反转为1的实际费用，另1元存在这个反转出来的1上，为了支付以后可能发生的反转为0；那么由于之前的存款，每个被反转为0的1上原本都有1元存款，也就支付了这次INCREMENT的费用。</p><p>而1的个数总是大于等于0的，所以存款不可能为负。</p><h3 id=势能法-potential-method>势能法 <em>Potential Method</em></h3><p>利用数据结构$D$的函数$\Phi$定义平摊代价：</p><blockquote><p>$平摊代价_i = 实际代价_i + \Phi(D_i) - \Phi(D_{i-1})$</p></blockquote><p>其中，对于任意$i$，都要满足$\Phi(D_i) \geq \Phi(D_0)$，这样我们就能保证我们给出了实际代价的一个上界。</p><p>势能法与记账法有些类似，但是记账法是将存款存储在某些特定的对象之上，而势能法的势能是体现在整个数据结构之上的。</p><h4 id=栈s上的三种操作-2>栈S上的三种操作</h4><p>仍然是栈的三操作，我们定义势函数为栈中对象的个数：</p><ul><li>开始时，栈是空的，所以有$\Phi(D_0) = 0$.</li><li>栈中对象数始终非负，所以满足$\Phi(D_i) \geq 0 = \Phi(D_0)$.</li></ul><p>那么我们就能保证我们给出了实际代价的一个上界。</p><p>那么对于作用在一个包含$s$个对象的栈上的第$i$个操作，</p><ul><li><p>PUSH</p><p>势能差：$\Phi(D_i) - \Phi(D_{i-1}) = s+1 - s = 1$</p><p>平摊代价：$a_i = c_i + \Phi(D_i) - \Phi(D_{i-1}) = 1+1=2$</p></li><li><p>MULTIPOP(S, k)</p><p>实际代价：$c_i = min(s, k)$</p><p>势能差：$\Phi(D_i) - \Phi(D_{i-1}) = -min(s, k)$</p><p>平摊代价：$a_i = c_i + \Phi(D_i) - \Phi(D_{i-1}) = 0$</p></li><li><p>POP</p><p>同理MULTIPOP，平摊代价也是0.</p></li></ul><p>我们分析出三种栈操作的平摊代价都是$O(1)$，那么n次操作的总平摊代价就是$O(n)$。</p><p>而这是总实际代价的一个上界。所以n次操作的最坏时间复杂度为$O(n)$。</p><h4 id=二进制计数器-2>二进制计数器</h4><p>我们定义势函数为数组$A[0&mldr;k-1]$中$1$的个数。</p><p>设第$i$次INCREMENT操作将$t_i$个1反转为0，那么实际代价为$t_i+1$</p><p>设第$i$次操作后，数组中1的个数为$b_i$，那么</p><ul><li>如果$b_i = 0$，则第$i$次操作反转了$k$个1，那么$b_{i-1} = t_i = k$</li><li>如果$b_i > 0$，那么有$b_i = b_{i-1} - t_i + 1$</li><li>这两种情形都满足：$b_i \leq b_{i-1} - t_i + 1$</li></ul><p>势能差：$\Phi(D_i) - \Phi(D_{i-1}) \leq (b_{i-1} - t_i + 1) - b_{i-1} = 1 - t_i$</p><p>平摊代价：$a_i = c_i + \Phi(D_i) - \Phi(D_{i-1}) = (t_i + 1) + (1- t_i) = 2$</p><h2 id=补充习题>补充习题</h2><h3 id=insert--remove_bottom_half>INSERT & REMOVE_BOTTOM_HALF</h3><p><strong>请设计一个数据结构，能够维护一组n个不同整数组成的集合S，能够支持以下两种操作：</strong></p><ul><li><strong>INSERT(x, S)：将x加入S。</strong></li><li><strong>REMOVE_BOTTOM_HALF(S)：从S移除最小的$\lceil \frac{n}{2} \rceil$个整数。</strong>
<strong>描述你的算法并给出最坏情况下两个操作的时间复杂度。采用势能法进行平摊分析，得到两种操作的平摊时间，选择合适的分析策略，令INSERT(x, S)的平摊时间为$O(1)$，REMOVE_BOTTOM_HALF(S)的平摊时间为$0$.</strong></li></ul><p>我们用一个无序的数组（或者，动态表）来存放所有的整数。</p><p>定义势函数$\Phi(D_i) = k|D_i| = kn$，那么</p><ul><li><p>REMOVE_BOTTOM_HALF(S):</p><blockquote><p>注意到，这步操作我们可以利用算法$Select(n, k)$选出中位数，然后再扫描一遍数组，将保留下来的数字复制到一个新的数组中，然后令S指向这个新的数组头，在实际时间2n内完成。</p><p>但是，为了严谨起见，我们设它是在实际时间$cn$内完成的。其中$c$为大于1的常数。</p></blockquote><p>我们令$k = 2c$，即$\Phi(D_i) = 2c|D_i| = 2cn \geq 0$，那么</p><p>势能差：$\Phi(D_i) - \Phi(D_{i-1}) = 2c\lfloor \frac{n}{2} \rfloor - 2cn$</p>$$
\begin{align}
a_i &= c_i + \Phi(D_i) - \Phi(D_{i-1}) \\
&= cn + 2c\lfloor \frac{n}{2} \rfloor - 2cn \\
&=  2c\lfloor\frac{n}{2}\rfloor - cn \\
&\leq 0 
  \end{align}
$$<p>所以平摊时间为0.</p></li><li><p>INSERT(x, S)：</p><p>势能差：$\Phi(D_i) - \Phi(D_{i-1}) = 2cn - 2c(n-1) = 2c$</p><p>平摊时间：$a_i = c_i + \Phi(D_i) - \Phi(D_{i-1}) = 1 + 2c = O(1)$</p></li></ul><p>显然，最坏情况下，INSERT操作的时间复杂度为$O(1)$，而根据上述分析，REMOVE_BOTTOM_HALF的最坏时间复杂度为$O(n)$。它们的平摊代价根据上述分析，也分别为$O(1)$与$0$。</p><h3 id=-mtfmove-to-front-链表访问><strong>[竞争分析]</strong> MTF(Move-to-Front) 链表访问</h3><h4 id=mtf算法>MTF算法</h4><p>考虑一个问题：</p><p>我们有一个线性表（比如单链表），在它上面：</p><ul><li><p>我们访问第$i$个元素的访问代价为$i$</p></li><li><p>交换两个相邻元素的代价为某个固定常数值</p></li></ul><p>我们的目标是：通过“交换”调整原链表，使得n次访问的总访问代价最小。</p><p>如果访问序列是已知的，那么我们当然可以针对这个访问序列设计一个最优的调整策略。
但是，如果我们并不能提前知道访问序列，我们可以考虑采取MTF方式来调整链表。</p><p>MTF利用了一个事实：对于现实中的问题，比如分页，如果第$i$个元素在时间$t$被访问，那么它比较有可能在时间$t$的不久后再次被访问。<em>（访问局部性 in ICS）</em></p><blockquote><p><strong>MTF算法</strong>：
当第$i$个元素被访问，我们将它移动到线性表的最前面(Move-to-Front)。
而这个“移动”操作是通过$i-1$次交换完成的。
所以，当第$i$个元素被访问，总代价为$i+ i-1 = 2i-1$</p></blockquote><p>我们可以利用平摊分析证明：</p><blockquote><p>MTF不会比任何其他调整策略（包括最优策略）效率的4倍更差，甚至不需要假设存在访问局部性。</p></blockquote><h4 id=定义势函数>定义势函数</h4><p>设任意一个调整策略为算法A。我们定义在时刻$t$时的势函数为MTF作用下的链表相对于A作用下的链表的逆序对数的2倍。</p><p>比如，在时刻$t$时，MTF的链表为$(a, b, c, e, d)$，A的链表为$(a, b, c, d, e)$，那么此时的势函数结果就是2。</p><p>由于初始时，两个算法下的链表都是初始链表，相对逆序对数为0，所以$\Phi(0)=0$。
而在任意时刻下，相对逆序对数都不可能为负值，所以$\Phi(t) \geq \Phi(0)$。
那么我们就能保证我们能给出实际代价的一个上界。</p><h4 id=计算平摊代价>计算平摊代价</h4><p>现在，我们考虑访问一个元素$x$。设$x$在MTF的链表里在第$k$个位置，在A的链表里在第$i$个位置。我们先假设A并不会交换其他元素。</p><p>在MTF算法中，访问元素$x$并交换到前面的总代价为$2k-1$。
在算法A中，访问元素$x$的代价为$i$，设其进行其他操作的代价为$Q$，那么总代价为$i+Q \geq i$。</p><p>因为MTF算法将$x$移动到了表前面，而这个$x$之前在MTF的链表中前面有$k-1$个元素，在A的链表中之前有$i-1$个元素，所以它最多增加$\min{k-1, i-1}$个新相对逆序对。与此同时，它最少减少了$k-1-\min{k-1, i-1}$个旧相对逆序对。</p><p>而由势函数的定义，势的变化最多为2倍的两者之差，即$4\min{k-1,i-1}-2(k-1)$</p>$$
\begin{align}
c
&= a + \Delta\Phi \\
	&\leq (2k-1) + 4\min\{k-1, i-1\}-2(k-1) \\
&\leq 4\min\{k-1, i-1\} + 1 \\
	&\leq 4i \\
&\leq 4(i+Q)
\end{align}
$$<p>也就得出了MTF的平摊代价不会比A的平摊代价的4倍更高。</p><h4 id=思考如果算法a会交换其他元素怎么办>思考：如果算法A会交换其他元素怎么办？</h4><p>不妨假设A交换了2个相邻元素。
这并不会影响到MTF的实际代价。这会增加$2$给新势能。
但同时，它也增加了算法A的$Q$部分$1$。
那么，MTF的均摊代价虽然增加了$2$，但是它的界限却增加了$4$，结论仍然成立。</p><p>所以，无论A怎么交换其他元素，都不会影响我们的结论。</p><h3 id=更多平摊分析经典问题>更多平摊分析经典问题：</h3><ul><li>Splay树</li><li>红黑树</li><li>斐波那契堆</li><li>并查集</li><li>最大流 (Push-Relabel 预流推进算法)</li><li><strong>动态表</strong> / 哈希表</li><li>替罪羊树</li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/%E7%AE%97%E6%B3%95/>算法</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main-article");renderMathInElement(e,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/tian-ji-sai-ma/><div class=article-image><img src=/p/tian-ji-sai-ma/cover.5d0da5ca333ba086385b1c1561cdcd31_hu_bd8eca264ef35bf7.jpg width=250 height=150 loading=lazy alt="Featured image of post 「田忌赛马」导致的统计偏差趣事一则" data-key=tian-ji-sai-ma data-hash="md5-XQ2lyjM7oIY4WxwVYc3NMQ=="></div><div class=article-details><h2 class=article-title>「田忌赛马」导致的统计偏差趣事一则</h2></div></a></article><article><a href=/p/multicast_and_igmp/><div class=article-details><h2 class=article-title>Multicast & IGMP</h2></div></a></article><article class=has-image><a href=/p/hpctricks_map_with_string_keys/><div class=article-image><img src=/p/hpctricks_map_with_string_keys/cover.ec91039d2447b87c7b5abd4ea134e07a_hu_dacbcfeeacfa3a49.png width=250 height=150 loading=lazy alt="Featured image of post 【高性能C++奇技淫巧】当你要用很多短字符串当字典key" data-key=HPCTricks_map_with_string_keys data-hash="md5-7JEDnSRHuHx7Wr1OoTTgeg=="></div><div class=article-details><h2 class=article-title>【高性能C++奇技淫巧】当你要用很多短字符串当字典key</h2></div></a></article><article><a href=/p/how_do_websites_save_passwords_safely/><div class=article-details><h2 class=article-title>网站如何安全地存储和传输用户密码</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//wr786.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 wr786</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>